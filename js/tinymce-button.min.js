!function(){tinymce.PluginManager.add("agms_tinymce_button",function(e,t){e.addButton("agms_tinymce_button",{text:"AGMS",title:"Advanced Google Maps Shortcode",icon:!1,onclick:function(){e.windowManager.open({title:"Insert Google Maps Shortcode",body:[{type:"textbox",name:"width",label:"Width"},{type:"textbox",name:"height",label:"Height"},{type:"textbox",name:"zoom",label:"Zoom",value:"12"},{type:"textbox",name:"iconurl",label:"Icon URL"},{type:"listbox",name:"maptype",label:"Map Type",values:[{text:"Roadmap",value:"ROADMAP"},{text:"Terrain",value:"TERRAIN"},{text:"Satellite",value:"SATELLITE"},{text:"Hybrid",value:"HYBRID"}]},{type:"textbox",name:"markers",label:"Markers",value:"Some Title, Some Really Nice Description, 40.711811, -73.993803",multiline:!0,minWidth:300,minHeight:100},{type:"textbox",name:"styles",label:"Styles",value:"",multiline:!0,minWidth:300,minHeight:100},{type:"textbox",name:"center",label:"Center Map Location"},{type:"textbox",name:"clustergridsize",label:"Cluster Grid Size",value:"50"},{type:"listbox",name:"scrollwheel",label:"Map Scrolling",values:[{text:"Enabled",value:"true"},{text:"Disabled",value:"false"}]}],onsubmit:function(t){var a=t.data.markers.split("\n"),l=[],r=[],o=[];for(i=0;i<a.length;i++){for(r[i]=a[i].split(","),j=0;j<r[i].length;j++)r[i][j]=r[i][j].trim();o[i]="{:'"+r[i][0]+"','"+r[i][1]+"',"+r[i][2]+","+r[i][3]+":}"}o=0===t.data.markers.length?"":' markers="{:'+o+':}"';var m=0===t.data.zoom.length?"":' zoom="'+t.data.zoom.trim()+'"',d=0===t.data.width.length?"":' width="'+t.data.width.trim()+'"',s=0===t.data.height.length?"":' height="'+t.data.height.trim()+'"',c=0===t.data.iconurl.length?"":' iconurl="'+t.data.iconurl.trim()+'"',g=0===t.data.maptype.length?"":' maptype="'+t.data.maptype.trim()+'"',h=0===t.data.scrollwheel.length?"":' scrollwheel="'+t.data.scrollwheel.trim()+'"',u=0===t.data.center.length?"":' center="{:'+t.data.center.trim()+':}"',p=0===t.data.clustergridsize.length?"":' clustergridsize="'+t.data.clustergridsize.trim()+'"',l=0===t.data.styles.length?"":' styles="'+t.data.styles.trim().replace(/\[/g,"{:").replace(/\]/g,":}").replace(/\s+/g,"").replace(/\"/g,"'")+'"',b="[googlemap"+d+s+c+m+g+h+u+p+o+l+"]";e.insertContent(b)}})}})})}();